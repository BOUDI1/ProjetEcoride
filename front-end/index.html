<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoRide - Le Covoiturage √âcologique</title>
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo"><a href="index.html">EcoRide üåø</a></h1>
            <nav class="nav">
                <button class="menu-toggle" id="menu-toggle" aria-label="Ouvrir le menu">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-list" id="nav-list">
                    <li><a href="index.html" class="active"><i class="fas fa-home"></i> Accueil</a></li> 
                    <li><a href="covoiturages.html"><i class="fas fa-car"></i> Covoiturages</a></li>
                    <li><a href="connexion.html"><i class="fas fa-sign-in-alt"></i> Connexion</a></li>
                    <li><a href="contact.html"><i class="fas fa-headset"></i> Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h2>R√©duisez votre impact, partagez votre trajet !</h2>
                <p>La plateforme de covoiturage soucieuse de l'environnement.</p>
                <div class="search-bar">
                    <form id="search-form">
                        <input type="text" id="depart" placeholder="Ville de d√©part" required>
                        <input type="text" id="arrivee" placeholder="Ville d'arriv√©e" required>
                        <input type="date" id="date-voyage">
                        <button type="submit" class="btn-primary">Rechercher</button>
                    </form>
                </div>
            </div>
        </section>

        <section class="presentation">
            <div class="container">
                <h3>Notre Mission √âcologique</h3>
                <div class="content-row">
                    <div class="text-mission">
                        <p>EcoRide facilite le covoiturage pour r√©duire l'empreinte carbone. En choisissant EcoRide, vous optez pour une solution √©conomique et √©cologique.</p>
                    </div>
                    
                    <div class="image-placeholder">
                        <img src="../images/photo-driver.jpg" alt="Conducteur EcoRide au coucher du soleil" class="responsive-image">
                    </div>
                </div>
                
                <div class="features-row">
                    <div class="feature-card">
                        <i class="fas fa-leaf icon-large"></i>
                        <h4>Impact R√©duit</h4>
                        <p id="co2-save">Chargement...</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-car icon-large"></i>
                        <h4>Trajets r√©alis√©s</h4>
                        <p id="nb-trajets">Chargement...</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-shield-alt icon-large"></i>
                        <h4>S√©curit√©</h4>
                        <p>Chauffeurs v√©rifi√©s et avis mod√©r√©s.</p>
                    </div>
                </div>

                <div style="max-width: 600px; margin: 40px auto;">
                    <canvas id="myChart"></canvas>
                </div>
            </div>
        </section>
    </main>
    <section class="presentation" style="background-color: #f9f9f9; padding: 60px 0;">
            <div class="container" style="text-align: center;">
                <h3>Ce que nos voyageurs pensent de nous</h3>
                
                <div style="margin-bottom: 40px;">
                    <p style="color: #666; margin-bottom: 20px;">Votre exp√©rience nous aide √† faire grandir la communaut√© EcoRide !</p>
                    <a href="avis.html" class="btn-primary" style="text-decoration: none; display: inline-block; padding: 12px 30px; border-radius: 50px;">
                        <i class="fas fa-star"></i> Laisser un avis
                    </a>
                </div>

                <div id="container-avis-public" style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                    <p>Chargement des t√©moignages...</p>
                </div>
            </div>
        </section>

        <script>
            // Fonction pour r√©cup√©rer uniquement les avis valid√©s
            async function afficherAvisPublics() {
                try {
                    const response = await fetch('http://localhost:8080/back-end/api/get_avis_valides.php');
                    const result = await response.json();
                    const container = document.getElementById('container-avis-public');

                    if (result.status === "success" && result.data.length > 0) {
                        container.innerHTML = result.data.map(avis => `
                            <div style="background: white; padding: 25px; border-radius: 15px; width: 300px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: left; border-top: 4px solid #2ecc71;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <strong style="color: #2c3e50;">${avis.pseudo}</strong>
                                    <span style="color: #f1c40f;">${"‚òÖ".repeat(avis.note)}${"‚òÜ".repeat(5-avis.note)}</span>
                                </div>
                                <p style="font-style: italic; color: #555; line-height: 1.5;">"${avis.commentaire}"</p>
                            </div>
                        `).join('');
                    } else {
                        container.innerHTML = "<p>Aucun avis pour le moment. Soyez le premier !</p>";
                    }
                } catch (error) {
                    console.error("Erreur lors du chargement des avis:", error);
                }
            }
            // Lancement au chargement de la page
            document.addEventListener('DOMContentLoaded', afficherAvisPublics);
        </script>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 EcoRide. Tous droits r√©serv√©s.</p>
            <div class="footer-links">
                <a href="mailto:contact@ecoride.fr">contact@ecoride.fr</a>
                <span>|</span>
                <a href="mentions_legales.html">Mentions L√©gales</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./main.js"></script>
</body>
</html>